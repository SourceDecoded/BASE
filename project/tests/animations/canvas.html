<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0">
</head>
<body>
    <canvas id="viewport"></canvas>
    <script src="../../BASE.js"></script>
    <script>
        BASE.require.loader.setRoot("../../");
        BASE.require([
            "BASE.canvas.View",
            "BASE.canvas.Timer",
            "BASE.web.animation.Animation",
            "BASE.web.animation.AnimationManager",
            "BASE.canvas.behaviors.Color",
            "BASE.canvas.behaviors.Shadow",
            "BASE.canvas.behaviors.Image",
            "BASE.canvas.FreeCamera",
            "BASE.canvas.FollowCamera"
        ], function () {

            var View = BASE.canvas.View;
            var Animation = BASE.web.animation.Animation;
            var Timer = BASE.canvas.Timer;
            var FreeCamera = BASE.canvas.FreeCamera;
            var FollowCamera = BASE.canvas.FollowCamera;
            var Color = BASE.canvas.behaviors.Color;
            var ImageBehavior = BASE.canvas.behaviors.Image;

            var unclesHouse = new Image();
            unclesHouse.onload = function () {

                var rootView = new View();
                rootView.width = 2000;
                rootView.height = 1000;
                rootView.addBehavior(new ImageBehavior(unclesHouse));

                var characterView = new View();
                characterView.width = 100;
                characterView.height = 100;
                characterView.addBehavior(new Color(0, 0, 255));

                rootView.appendChild(characterView);

                var viewport = document.getElementById("viewport");
                viewport.width = 1000;
                viewport.height = 800;

                var camera = new FollowCamera(viewport, rootView, characterView);
                window.camera = camera;
                window.characterView = characterView;

                moveTo = function (left, top) {
                    var animation = new Animation({
                        target: characterView,
                        properties: {
                            top: {
                                from: characterView.top,
                                to: top
                            },
                            left: {
                                from: characterView.left,
                                to: left
                            }
                        },
                        easing: "easeInOutQuad",
                        duration: 1000
                    });
                    animation.play();
                };

            }
            unclesHouse.src = "Uncle_House.jpg";



        });
    </script>
</body>
</html>